{"version":3,"file":"im_mobile.min.js","sources":["im_mobile.js"],"names":["BX","ImLegacy","MessengerMobileLegacy","this","notifyLoadFlag","notifyLastId","messageCountArray","counterMessages","counterNotifications","timeoutUpdateCounters","timeoutRefreshMessage","timeoutRefreshNotifications","timeoutReadMessage","timeoutUpdateStateLight","timeoutAnimation","intervalAnimation","messageTmpIndex","sendAjaxTry","sendMessageFlag","historyMessage","historyMessageCount","historyPage","audio","newMessage","send","reminder","ready","writing","writingList","writingListTimeout","writingSendList","writingSendListTimeout","prototype","init","params","addCustomEvent","delegate","error","app","BasicAuth","success","setTimeout","updateStateLight","BXMobileApp","command","userId","updateCounters","chatId","message","parseInt","lastId","MESSAGE","senderId","recipientId","getVar","var","from","callback","PAGE_ID","id","clearTimeout","notifyTimeout","refreshPanelPage","notifyViewedWait","setPanelPages","messages_page","messages_open_empty","notifications_page","notifications_open_empty","initAudio","openSearch","openTable","url","data","a_users","user","user_id","toString","loadPageBlank","unique","set_focus_to_search","markmode","multiple","return_full_mode","modal","alphabet_index","outsection","notifyViewed","timeoutNotifyViewedWait","divAudio","create","attrs","style","children","props","display","src","type","document","body","insertBefore","firstChild","i","setBadge","setCounters","messages","notifications","sendMessage","messageText","userIsChat","substr","util","trim","messengerTextarea","value","blur","length","drawMessage","date","text","prepareText","endSendWriting","sendMessageAjax","sendMessageToChat","addClass","appendChild","className","ajax","method","dataType","IM_SEND_MESSAGE","CHAT","ID","RECIPIENT_ID","TAB","MOBILE","IM_AJAX_CALL","sessid","bitrix_sessid","onsuccess","ERROR","removeClass","onCustomEvent","SEND_MESSAGE","textElement","findChild","innerHTML","lastMessageElementDate","SEND_DATE_FORMAT","setAttribute","failture","BITRIX_SESSID","reason","node","events","touchend","proxy_context","classList","remove","parentNode","undeliveredMessageIcon","touchstart","add","html","nextSibling","formatDate","getNowDate","onfailure","appendTop","undefined","alert","replace","files","FILE_ID","file","system","USERS","emptyBlock","container","clearInterval","window","platform","scrollPositionMax","scrollHeight","offsetHeight","scrollPositionOriginal","scrollTop","BitrixAnimation","animate","duration","start","scroll","finish","transition","makeEaseOut","transitions","quart","step","state","complete","hasClass","DIALOG_LAST_READ","IM_NOTIFY_VIEWED","MAX_ID","readMessage","IM_READ_MESSAGE","USER_ID","LAST_ID","confirmRequest","timeout","IM_NOTIFY_CONFIRM","NOTIFY_ID","notifyId","NOTIFY_VALUE","notifyValue","IM_UPDATE_STATE_LIGHT","SITE_ID","NOTIFY","PULL","PULL_CONFIG","updateChannelID","METHOD","CHANNEL_ID","CHANNEL_DT","PATH","PATH_WS","COUNTER_MESSAGES","COUNTER_NOTIFICATIONS","NOTIFY_LAST_ID","COUNTER_UNREAD_MESSAGES","counter","COUNTERS","tryConnect","updateState","getHistory","Math","floor","IM_HISTORY_LOAD_MORE","count","height","heightFirst","arHistory","arHistorySort","push","sort","ii","pullDownLoadingStop","pullDown","enable","today","currentDate","Date","getFullYear","getMonth","getDate","round","timestamp","format","convertBitrixFormat","prepare","quote","htmlspecialchars","drawReadMessage","messageId","DIALOG_ID","showReadMessage","startWriting","drawWriting","endWriting","name","fast","sendWriting","IM_START_WRITING","leaveFromChat","IM_CHAT_LEAVE","CHAT_ID","closeController","autoScroll","innerHeight"],"mappings":"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"}